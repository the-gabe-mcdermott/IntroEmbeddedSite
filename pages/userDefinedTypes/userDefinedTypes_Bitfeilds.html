<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Introduction to Embedded Systems- User Defined Types</title>

    <!-- Bootstrap Core CSS -->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../../css/simple-sidebar.css" rel="stylesheet">
	<link href="../../css/textBodyStyles.css" rel="stylesheet">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div id="wrapper">
<div id="injectNavbarHere"></div>

<!-- Page Content -->

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
						
						<div class=chapterBody>
	

<h1> User Defined Types </h1>
	
<h2> Bitfeilds </h2>

<p>
    Bitfeilds allows you 
    to assign a label to individual bits,
    or groups of bits, in a variable.
    For instance, I can use a bitfeild 
    to assign a label to individual four 
    bit words within a byte.
</p>

<div class="codeExample">
<pre>
<code>
    struct wordStore_t{
	uint8_t bits0123	: 4;
	uint8_t	bits4567	: 4;
	};
	
int main(void)
{
	struct wordStore_t someData;
	
	//Maximum value for allocated space
	//of 4 bits.
	someData.bits0123 = 15; 
	someData.bits4567 = 12;
	return 0;
}
</code>
</pre>
</div>

<p>
    It could also be used to pack 
    multiple one bit
    flags into a single byte.
</p>

<div class="codeExample">
<pre>
<code>
    struct flagStore_t{
	uint8_t flagA			: 1;
	uint8_t flagB			: 1;
	uint8_t flagC			: 1;
	uint8_t flagD			: 1;
	uint8_t flagE			: 1;
	uint8_t flagUnused		: 3;
};

int main(void)
{
	struct flagStore_t myFlags;
	
	myFlags.flagA = 1;
	myFlags.flagB = 1;
	myFlags.flagC = 1;
	myFlags.flagD = 0;
	myFlags.flagE = 0;	
	
	return 0;
}
</code>
</pre>
</div>
<h3>Gotchas</h3>
                            
<p>
    Bitfeilds use the "base" type they are
    given to define their size in memory.
    In the above example, the "uint8_t" type
    defines the size of the bitfeild as eight bits.
</p>

<p>
    If the size is defined as something more exotic, like 
    45 bits, the variable would exist in one word of 32 bit
    wide memory, and 13 bits of it another word.
    In order to avoid complications like this, many compilers
    will limit the size of a bitfeild to the size of an integer
    in that system (32, 64, or some other number of bits.)
</p>

<p>
    Different compilers will enforce different length
    restrictions, and others will enforce none at all.
    This quirk, among many, is a reason that 
    bitfeilds are not especially portable, and
    may be interpreted differently by different
    compilers. 
    This should be considered when using them
    in your code.
</p>

</div>


<div class=license>
<p>
	&copy 2017
</p>
</div>

						
						
						
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    <script src="../../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../../js/bootstrap.min.js"></script>

    <!-- Import Navbar -->
    <script src="../../js/toggleNavbar_UserDefinedTypes.js"></script>

	
	<!-- Google Anaylytics Script -->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96461127-1', 'auto');
  ga('send', 'pageview');

	</script>
</body>

</html>
